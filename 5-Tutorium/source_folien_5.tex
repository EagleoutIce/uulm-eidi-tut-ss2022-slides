\InputIfFileExists{../data/global.tex}\relax\relax

\iffull
\title{Klasse globale, potente Entwürfe}
\subtitle{Tutorium fünf}
\date{KW 22}
\addbibresource{references.bib}
\fi
\SetTutoriumNumber{5}

\iffull\begin{document}
\titleframe

\TopicOverview{5}
\fi


\iffull{\SummaryFrame
\begin{frame}[fragile,c]{Kurzwiederholung}
    \begin{itemize}[<+(1)->]
        \itemsep9.25pt
        \item Bei Arrays \textit{muss} Java \info{\say{die erste Ebene}} initialisieren! \begin{itemize}
            \itemsep3pt
            \item Alles wird \say{Null} (\bjava{0}, \bjava{0.0}, \bjava{'\\0'}, \bjava{false}, \bjava{null})
            \item \bjava{new float[2][]}~\textcolor{gray}{\(\to\)} \bjava{\{null, null\}},~~\bjava{new int[2][1]}~\textcolor{gray}{\(\to\)} \bjava{\{\{0\}, \{0\}\}},~\ldots
        \end{itemize}
        \item Methoden werden in Java durch ihre Signatur unterschieden \begin{itemize}
            \itemsep3pt
            \item Dies ist der Name und die Parametertypliste
            \item Im Beispiel \onslide<9->{ist dies \bjava{mega(int, char[])}:}
\AnimateCode{onslide={*\Line{1}\Others{3}\NoLocation\Forever},first slide=8}%
\begin{plainjava}[aboveskip=0pt,belowskip=0pt]
!*\onslide<7->*!public static double mega(int i, char[] r) {
!*\onslide<7->*!    return (double) i + r.length;
!*\onslide<7->*!}!*\onslide<1->*!
\end{plainjava}
\endAnimateCode
        \end{itemize}
    \item<10-> Unterprogramme sind ein wichtiger Abstraktions-Mechanismus
    \item<11-> Seiteneffekte sind ein Problem und sollten \info{wo möglich} vermieden werden!
    \end{itemize}
\end{frame}
}\fi

\SetNextSectionText[.75\linewidth]{\say{Not all OOP systems are based around classes. Prototype-based OOP doesn't have classes. [\ldots] The reason we have objects, [\ldots] is that object (\textup{sic}) can be experts about a problem space.}\smallskip\\ Curtis \say{Ovid} Poe --- \sectiontextlink\link{https://ovid.github.io/articles/why-is-object-oriented-programming-bad.html}{Why is Object-Oriented Programming Bad?}}
\section{Präsenzaufgabe}
\begin{frame}[fragile,c]{Präsenzaufgabe}
\begin{aufgabe}{Show me ya' potency}
\vspace*{-\baselineskip}\relax
\begin{enumerate}
    \item<2-> Implementieren Sie eine Klasse \T{Potenz} für Potenzen. Die Klasse soll zwei private Attribute \T{basis} und \T{potenz} besitzen,
    sowie einen Konstruktor mit zwei Argumenten definieren, der den Attributen Anfangswerte zuweist. \onslide<3->{Zusätzlich
    soll es getter und setter für die Attribute geben. Die Klasse soll eine öffentliche Methode besitzen, die die
    Attribute der Instanz auf die Konsole ausgibt.}
    \item<4-> Legen Sie \info{im selben Ordner} eine zweite Java Datei namens \T{PotenzMain.java} an, die als Programmeinstiegspunkt dienen soll, d.h. hier ist die \T{main} Methode implementiert. \onslide<5->{Instanziieren Sie innerhalb der \T{main} Methode ein Objekt der
    Klasse \T{Potenz} und lassen Sie sich die Attribute des Objekts anzeigen.}
\end{enumerate}
\end{aufgabe}
\begin{tikzpicture}[@O]
\node[above left=.35mm,thick,draw,gray,fill=white,rounded corners=2pt,yshift=\btdmfootheight,scale=.65,align=left] at(current page.south east) {\bbash{javac Potenz.java PotenzMain.java}\\\bbash{java PotenzMain}};
\end{tikzpicture}
\end{frame}

{\newcommand<>\Mark[1]{{\only#2{\color{black}}#1}}
\MakeThePinguExplainIt[text width=7cm,xshift=4mm,yshift=2mm]{cap=!hide,cup=!hide,glasses=!hide,body type=legacy, eye patch right, right item angle=-50}{Die Typen von \T{basis} und \T{potenz} sind hier sinnvoll, aber frei gewählt.}
\begin{frame}[fragile,c]{Ich bin Herbert Klassenzüchter!}
\columns[onlytextwidth,c]
\column{.3\linewidth}
\task<2->{Implementieren Sie eine \Mark<3->{Klasse \T{Potenz} für Potenzen}. Die Klasse soll \Mark<5->{zwei private Attribute \T{basis} und \T{potenz}} besitzen,
sowie einen \Mark<8->{Konstruktor mit zwei Argumenten} definieren, der den \Mark<10->{Attributen Anfangswerte zuweist}.\medskip\par
Zusätzlich soll es \Mark<12->{getter} und \Mark<14->{setter} für die Attribute geben. Die Klasse soll eine \Mark<16->{öffentliche Methode} besitzen, die die
Attribute der Instanz auf die Konsole ausgibt.}
\column{.64\linewidth}
\lstfs{9}
\begin{plainjava}[lineskip=.5pt,morekeywords={[3]{Potenz,PotenzMain}}]
!*\onslide<4->*!public class Potenz {
!*\onslide<6->*!   private !*\onslide<7->*!double !*\onslide<6->*!basis;
!*\onslide<6->*!   private !*\onslide<7->*!int !*\onslide<6->*!potenz;
!*\onslide<4->*!
!*\onslide<9->*!   public Potenz(double b, int e) {
!*\onslide<11->*!      this.basis = b;
!*\onslide<11->*!      this.potenz = e;
!*\onslide<9->*!   }
!*\onslide<13->*!   public double getBasis() { return this.basis; }
!*\onslide<13->*!   public int getPotenz() { return this.potenz; }
!*\onslide<15->*!   public void setBasis(double b) { this.basis = b; }
!*\onslide<15->*!   public void setPotenz(int e) { this.potenz = e; }

!*\onslide<17->*!   public void print() {
!*\onslide<17->*!      System.out.println(basis + "^(" + potenz + ")");
!*\onslide<17->*!   }
!*\onslide<4->*!}
\end{plainjava}
\endcolumns
\begin{tikzpicture}[@O]
    \onlyhandout<19->{\node[above left,yshift=\btdmfootheight] at (current page.south east) {\textattachfile{\curpath Potenz.java}{Potenz.java}\;};}
    \onslide<18->{\node[left=-9mm,scale=.6] at(current page.12) {\copy\pinguexplainbox};}
\end{tikzpicture}
\end{frame}

\begin{frame}[fragile,c]{Major Main}
\columns[onlytextwidth,c]
\column{.3\linewidth}
\task<3->{Legen Sie eine \Mark<4->{zweite Java Datei namens \T{PotenzMain.java}} an, die als Programmeinstiegspunkt dienen soll, d.h. hier ist die \Mark<6->{\T{main} Methode} implementiert.\medskip\par Instanziieren Sie innerhalb der \T{main} Methode \Mark<8->{ein Objekt der
Klasse \T{Potenz}} und lassen Sie sich die \Mark<10->{Attribute des Objekts anzeigen}.}
\column{.64\linewidth}
\lstfs{9}\SetupLstHl
\begin{plainjava}[lineskip=1.5pt,morekeywords={[3]{Potenz,PotenzMain}}]
!*\onslide<2->*!!*\CodeFileMarker{Potenz.java}*!
!*\onslide<2->*!|ihl|public class Potenz {|ihl|
!*\onslide<2->*!|ihl|    public Potenz(double b, int e) { ... }|ihl|
!*\onslide<2->*!|ihl|    ...|ihl|
!*\onslide<2->*!|ihl|    public void print() { ... }|ihl|
!*\onslide<2->*!|ihl|}|ihl|

!*\onslide<5->*!!*\CodeFileMarker{PotenzMain.java}*!
!*\onslide<5->*!public class PotenzMain {
!*\onslide<13->*!   !*\ShowInTheWeb{https://www.online-java.com/oBHh8ndD2C}*!
!*\onslide<7->*!   public static void main(String[] args) {
!*\onslide<9->*!      Potenz p = new Potenz(2.0, 3);
!*\onslide<11->*!      p.print(); !*\onslide<12->*!// :yields: 2.0^(3)
!*\onslide<7->*!   }
!*\onslide<5->*!}
\end{plainjava}
\endcolumns
\begin{tikzpicture}[@O]
    \onlyhandout<14->{\node[above left,yshift=\btdmfootheight] at (current page.south east) {\textattachfile{\curpath PotenzMain.java}{PotenzMain.java}\;};}
\end{tikzpicture}
\end{frame}
}

\SetNextSectionText{Methoden und OOP\\Abgabe: \DTMDate{2022-05-30}}
\section{Übungsblatt 5}
\subsection{Aufgabe 1}
\begin{lrbox}{\codebox}
\SetupLstHl\lstfs{7}\begin{minipage}{7cm}
\begin{plainjava}
public class Quersumme {
    public static void main(String[] args) {
        int zahl = Integer.parseInt(args[0]);

        if (zahl < 0) {
            System.err.println("Eingabe ungültig!");
            return;
        }

        int quersumme = 0;
        int divRest;
        while (zahl > 0) {
            divRest = zahl % 10;
            quersumme = quersumme + divRest;
            zahl = zahl / 10;
        }
        System.out.println(quersumme);
    }
}
\end{plainjava}
\end{minipage}
\end{lrbox}
\begin{frame}[c]{Aufgabe 1: Methoden mit einer variablen Parameterzahl }
    \task<2->{Legen Sie eine Java Datei namens Quersummen.java und implementieren Sie die folgende Aufgabe innerhalb dieser
    Datei als eine öffentliche statische Methode namens \T{quersummeVonQuersummen}.
    \onslide<3->{Die Methode soll eine beliebige Anzahl an Parametern vom Typ \T{int} erwarten und für jede dieser Zahlen die Quersumme
    berechnen und diese aufsummieren. Zusätzlich soll eine weitere boolean Parameter angeben, ob aus der Summe wiederum die Quersumme berechnet werden soll. Testen Sie Ihre Implementierung mit den angebenden Beispielen.}\medskip

    \onslide<4->{\textbf{Beispiele:}\\
\T{Ja, 123, 92, 57, 30 $\to$ 6 + 11 + 12 + 3 = 32 $\to$ 5}\\
\T{Nein, 12, 9, 4 $\to$ 3 + 9 + 4 = 16}}
    }\vspace*{-2.25\baselineskip}
\onslide<5->{\centerline{\hspace*{15mm}\begin{tikzpicture}
    \pingu[right wing shock,left wing wave, eyes wink,halo,name=calline]
    \node[shape=cloud callout,above right=5mm,xshift=2.85cm,draw,callout absolute pointer={([xshift=12mm]calline-head-left)},callout pointer segments=3,cloud ignores aspect,cloud puffs=25,scale=.45,inner sep=0pt] (@) at(calline-wing-left-tip) {
        \vspace*{-3mm}\hspace*{3mm}\copy\codebox
    };
    \node[opacity=.75,gray] at ([yshift=.25cm]@) {Blatt 3, Aufgabe 3};
\end{tikzpicture}}}
\end{frame}

{
\begin{frame}[fragile]{Meta-Quersummen}
\begin{itemize}[<+(1)->]
    \item<2-> Wir sollen mehrere Quersummen berechnen. Wir haben schon ein Programm für eine:\vfill\lstfs{8}
\begin{tikzpicture}[@O]
    \def\hlcolor{paletteA}
    \onslide<4->{\hlbehindcode{IntParse}{@>}}
    \onslide<8->{\hlbehindcode{return}{@2>}}
    \def\hlcolor{gray}
    \onslide<11->{\hlbehindcode{divrest1}{@3>}}
    \onslide<13->{\hlbehindcode{divrest2}{@4>}
    \hlbehindcode{divrest3}{@5>}}
    \def\hlcolor{paletteA}
    \onslide<15->{\hlbehindcode{return2}{@6>}}
\end{tikzpicture}
\columns[onlytextwidth,c]
\column{.475\linewidth}
\begin{plainjava}
!*\onslide<3->*!public static void main(String[] args) {
!*\onslide<3->*!   !*\Snode{IntParse}*!int zahl = Integer.parseInt(args[0]);!*\Snode{IntParse@}*!
!*\onslide<3->*!   if (zahl < 0) {
!*\onslide<3->*!      System.err.println("Eingabe doof!");
!*\onslide<3->*!      !*\Snode{return}*!return;!*\Snode{return@}*!
!*\onslide<3->*!   }
!*\onslide<3->*!   int quersumme = 0;
!*\onslide<3->*!   !*\Snode{divrest1}*!int divRest;!*\Snode{divrest1@}*!
!*\onslide<3->*!   while (zahl > 0) {
!*\onslide<3->*!      !*\Snode{divrest2}*!divRest = zahl % 10;!*\Snode{divrest2@}*!
!*\onslide<3->*!      quersumme += !*\Snode{divrest3}*!divRest!*\Snode{divrest3@}*!;
!*\onslide<3->*!      zahl = zahl / 10;
!*\onslide<3->*!   }
!*\onslide<3->*!   !*\Snode{return2}*!System.out.println(quersumme);!*\Snode{return2@}*!
!*\onslide<3->*!}
\end{plainjava}
\column{0pt}
\clap{$\to$}
\column{.475\linewidth}
\makeatletter
\begin{plainjava}
!*\onslide<5->*!public static int quersumme(!*\tikzmarknode{IntParseNew}{\sbasic{\skB{int} zahl}}*!) {
!*\onslide<6->*!    if(zahl < 0){
!*\onslide<7->*!        System.err.println("Eingabe doof!");
!*\onslide<9->*!        !*\tikzmarknode{returnNew}{\skA{return}}*! 0;
!*\onslide<6->*!    }
!*\onslide<10->*!    int quersumme = 0;
!*\onslide<12->*!    while(zahl > 0){
!*\onslide<13->*!        quersumme += zahl !*\tikzmarknode{percentNew}{\sbasic{\%}}*! 10;
!*\onslide<14->*!        zahl = zahl / 10;
!*\onslide<12->*!    }
!*\onslide<16->*!    !*\tikzmarknode{return2New}{\skA{return}}*! quersumme;
!*\onslide<5->*!}
\end{plainjava}
\endcolumns
\end{itemize}
\begin{tikzpicture}[@O,K/.style={above,gray,font=\footnotesize\sffamily},every path/.append style={line cap=round}]
    \onslide<5->{\draw[lightgray,-Kite] (@>) to[out=5,in=165,edge node={node[K] {\only<0>{Ein allgemeinerer Eingabeparameter}}}] ([yshift=.5mm]IntParseNew.north);}
    \onslide<9->{\draw[lightgray,-Kite] (@2>) to[out=0,in=175,edge node={node[K,below] {\only<0>{Rückgabetyp!}}}] ([xshift=-1mm]returnNew.west);}

    \onslide<13->{\draw[lightgray,-Circle] (@4>) -- ++(7mm,0) coordinate (@);
    \draw[lightgray] (@3>) to[out=0,in=135] (@);
    \draw[lightgray] (@5>) to[out=0,in=225] (@);
    \draw[lightgray,-Kite] (@) to[out=0,in=182] ([yshift=-.25mm]percentNew.south);}
    \only<0>{\node[K,lightgray,above right,rotate=-1] at(@) {Optionale Vereinfachung};}

    \onslide<16->{\draw[lightgray,-Kite] (@6>) to[out=0,in=175,edge node={node[K,below=.4cm] {\only<0>{Ordentliche Rückgabe}}}] ([xshift=-1mm]return2New.west);}
    \onslide<17->{\node[above left,scale=.8,yshift=\btdmfootheight+.25mm,black] at(current page.south east) {It is always a great time to be a good \link{https://www.oreilly.com/library/view/97-things-every/9780596809515/ch08.html}{boy or girl scout}!};}
\end{tikzpicture}
\end{frame}

\begin{frame}[fragile]{Beliebige Quersummen brummen}
\SetupLstHl
\begin{itemize}
    \item<2-> Die beliebige Anzahl ints schaffen wir mit \link{https://docs.oracle.com/javase/8/docs/technotes/guides/language/varargs.html}{varargs}:
\begin{plainjava}
!*\onslide<3->*!public class Quersummen {
!*\onslide<4->*!   |ihl|public static int quersumme(int zahl) { ... }|ihl|


!*\onslide<5->*!   public static int !*\tikzmarknode{quersummeVonQuersummen}{quersummeVonQuersummen}*!(boolean !*\tikzmarknode{sum2}{sum2}*!, int... zahlen) {
!*\onslide<6->*!       int quersummenSumme = 0;
!*\onslide<7->*!       for(int zahl : zahlen)
!*\onslide<8->*!           quersummenSumme += quersumme(zahl);
!*\onslide<3->*!
!*\onslide<9->*!       return sum2 ? !*\onslide<10->*!quersumme(quersummenSumme) : !*\onslide<10->*!quersummenSumme!*\onslide<9->*!;
!*\onslide<5->*!  }
!*\onslide<3->*!}
\end{plainjava}
\end{itemize}
\begin{tikzpicture}[@O]
    \onslide<11->{\draw[lightgray,-Kite] (sum2.north) to[bend left] ++(.5,1.15) node[below right,yshift=1.2\dp\strutbox,T,text width=3.4cm] {Hier nur ein kurzer Name, damit es auf die Folie passt};}
    \onslide<12->{\draw[lightgray,-Kite] (quersummeVonQuersummen.300) to[bend right] ++(.5,-.6) node[right,T,align=left,yshift=+1\dp\strutbox] {Signatur?\\\T{quersummeVonQuersummen(boolean, int...)}};}
\end{tikzpicture}
\end{frame}

\begin{frame}[fragile]{Ich bin die Biene!}
\SetupLstHl
\begin{itemize}[<+(1)->]
    \item Jetzt fehlt noch die Methode zum Testen:\medskip
\begin{plainjava}
!*\onslide<3->*!public class Quersummen {
!*\onslide<4->*!    |ihl|public static int quersumme(int zahl) { ... }|ihl|
!*\onslide<4->*!    |ihl|public static int quersummeVonQuersummen(boolean sum2, int... zahlen)|ihl|
!*\onslide<4->*!        |ihl|{ ... }|ihl|


!*\onslide<5->*!    public static void main(String[] args) {
!*\onslide<6->*!        System.out.println(quersummeVonQuersummen(true, 123, 92, 57, 30));
!*\onslide<7->*!        System.out.println(quersummeVonQuersummen(false, 12, 9, 4));
!*\onslide<5->*!    }
!*\onslide<3->*!}
\end{plainjava}
\end{itemize}
\begin{tikzpicture}[@O]
\iffull
    \onslide<8->{\node[above left,xshift=4mm,yshift=1.5mm,scale=.35] (bee) at(current page.south east) {\rotatebox{20}{\copy\beebox}};
    \node[T,left] at (bee.west) {Grüße aus einem \textup{summ}derbaren letzten Semester};}
    \onlyhandout<9->{\node[above left,yshift=\btdmfootheight,xshift=-2.5cm] at (current page.south east) {\textattachfile{\curpath Quersummen.java}{Quersummen.java}\;};}
\else
    \onlyhandout<8->{\node[above left,yshift=\btdmfootheight] at (current page.south east) {\textattachfile{\curpath Quersummen.java}{Quersummen.java}\;};}
\fi
\end{tikzpicture}
\end{frame}
}
\subsection{Aufgabe 2}
{
\MakeThePinguExplainIt[text width=7cm]{cap=!hide,headband,cup=!hide,heart=shadeA,right item angle=-120}{Implizite Typkovertierung und Unterprogramme können hier sehr hilfreich sein.}
\begin{frame}{Aufgabe 2: Globale Variablen}
    \task<2->{Legen Sie eine Java Datei namens \T{CharRotation.java} an. Innerhalb dieser Datei sollen Sie die folgende Aufgabe implementieren.\medskip\par
    \onslide<3->{Implementieren Sie eine Methode namens \T{rotiereCharacterArray}, die ein char Array als Parameter erwartet und innerhalb dieses Arrays (\textit{in place}) alle Klein- sowie Großbuchstaben um \T{n} Stellen zyklisch und alphabetisch verschiebt.
    Legen Sie n als statische globale Konstante an. Dabei sollen Klein- und Großbuchstaben erhalten bleiben. Testen Sie Ihre Implementierung mit mindestens einem Beispiel.}\medskip\par
    \onslide<4->{\textbf{Beispiel:}\\
    \T{n = 3, \{'a', 'Z'\} $\to$ \{'d', 'C'\}}
}}
\begin{tikzpicture}[@O]
    \onslide<5->{\node[above left,yshift=\btdmfootheight,scale=.8] at(current page.south east) {\copy\pinguexplainbox};}
\end{tikzpicture}
\end{frame}
}

\begin{frame}[fragile]{Problemreduktion}
    \begin{itemize}[<+(1)->]
        \itemsep7.5pt
        \item Wir reduzieren das Problem, alle Zeichen zu verschieben, zunächst auf ein Zeichen
        \item Bei Hilfsmethoden stellt sich die Frage, ob sie semantisch alleine sinnvoll sind\begin{itemize}
            \itemsep2pt
            \item Ist es sinnvoll nur ein einziges Zeichen zu rotieren?~\pause Ja
            \item Benötigen wir kontextabhängige Informationen?~\pause Nicht wirklich (\T{n} ist konstant)
            \item Haben wir implizite Annahmen die gelten müssen?~\pause Auch nicht
            \item In dem Fall empfiehlt sich \bjava{public}, sonst eher \bjava{private}
        \end{itemize}
\begin{plainjava}
!*\onslide<11->*!public static char rotiereCharacter(char c){
!*\onslide<11->*!   // Denglish 4 Leben!
!*\onslide<11->*!}
\end{plainjava}
        \item<12-> Nun prüfen wir weiter ob es ein Großbuchstaben, ein Kleinbuchstaben oder ein sonstiges Zeichen ist.
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Hilfsmethodenfreuden}
    \SetupLstHl
\lstfs{9}
\begin{tikzpicture}[@O]
    \def\hlcolor{gray}
    \onslide<17->{\hlbehindcode[1pt]{base}{@>}}
\end{tikzpicture}\vspace*{-\baselineskip}
\begin{onlyenv}<2-8|handout:0>
\begin{plainjava}[lineskip=2.5pt]
!*\onslide<2->*!public static char rotiereCharacter(char c){
!*\onslide<3->*!    if (!*\onslide<4->*!c >= 'a' && c <= 'z'!*\onslide<3->*!) {
!*\onslide<6->*!        return /*?*/;
!*\onslide<3->*!    } else if (!*\onslide<5->*!c >= 'A' && c <= 'Z'!*\onslide<3->*!) {
!*\onslide<6->*!        return /*?*/;
!*\onslide<3->*!    } else {
!*\onslide<6->*!        return c;
!*\onslide<3->*!    }
!*\onslide<2->*!}

!*\onslide<7->*!private static boolean isLowercase(char c) {
!*\onslide<8->*!    return c >= 'a' && c <= 'z';
!*\onslide<7->*!}
\end{plainjava}
\end{onlyenv}
\begin{onlyenv}<9|handout:0>
\begin{plainjava}[lineskip=2.5pt]
public static char rotiereCharacter(char c){
    if (isLowercase(c)) {
        return !*\HStrut*!/*?*/;
    } else if (c >= 'A' && c <= 'Z') {
        return !*\HStrut*!/*?*/;
    } else {
        return c;
    }
}

private static boolean isLowercase(char c) {
    return c >= 'a' && c <= 'z';
}
\end{plainjava}
\end{onlyenv}
\begin{onlyenv}<10|handout:0>
\begin{plainjava}[lineskip=2.5pt]
public static char rotiereCharacter(char c){
    if (isLowercase(c)) {
        return !*\HStrut*!/*?*/;
    } else if (isUppercase(c)) {
        return !*\HStrut*!/*?*/;
    } else {
        return c;
    }
}

private static boolean isLowercase(char c) {
    return c >= 'a' && c <= 'z';
}
private static boolean isUppercase(char c) {
    return c >= 'A' && c <= 'Z';
}
\end{plainjava}
\end{onlyenv}
\begin{onlyenv}<11-19|handout:0>
\begin{plainjava}[lineskip=2.5pt]
public static char rotiereCharacter(char c){
    if (isLowercase(c)) {
        return !*\HStrut*!/*?*/;
    } else if (isUppercase(c)) {
        return !*\HStrut*!/*?*/;
    } else {
        return c;
    }
}

!*\onslide<16->*!private static char addCyclicOnBase(!*\Snode{base}*!char base!*\Snode{base@}*!, char c) {
!*\onslide<18->*!    return (char) (base + Math.!*\tikzmarknode{floorMod}{floorMod}*!(c - base + n, !*\tikzmarknode{magic-num}{\snum{26}}*!));
!*\onslide<16->*!}!*\onslide<1->*!
\end{plainjava}
\begin{plainjava}
private static boolean isLowercase(char c) { return c >= 'a' && c <= 'z'; }
private static boolean isUppercase(char c) { return c >= 'A' && c <= 'Z'; }
\end{plainjava}
\end{onlyenv}
\begin{onlyenv}<20-|handout:1>
\begin{plainjava}[lineskip=2.5pt]
public static char rotiereCharacter(char c){
    if (isLowercase(c)) {
        return !*\HStrut*!addCyclicOnBase('a', c);
    } else if (isUppercase(c)) {
        return !*\HStrut*!addCyclicOnBase('A', c);
    } else {
        return c;
    }
}

private static char addCyclicOnBase(!*\Snode{base}*!char base!*\Snode{base@}*!, char c) {
    return (char) (base + Math.!*\tikzmarknode{floorMod}{floorMod}*!(c - base + n, !*\tikzmarknode{magic-num}{\snum{26}}*!));
}
\end{plainjava}
\begin{plainjava}
private static boolean isLowercase(char c) { return c >= 'a' && c <= 'z'; }
private static boolean isUppercase(char c) { return c >= 'A' && c <= 'Z'; }
\end{plainjava}
\end{onlyenv}
\begin{tikzpicture}[@O]
\scope[shift=(current page.east),xshift=-2.35cm,yshift=2.5cm,scale=.9]
    \onslide<12->{\foreach[count=\i from 0] \colprefix/\letter/\ascii in {\color{codeouthl}/?/63,\color{codeouthl}/@/64,/A/65,/B/66,/C/67,\color{codeouthl}/$\mathbf{\vdots}$/0,/Y/89,/Z/90,\color{codeouthl}/[/91,\color{codeouthl}/\textbackslash/92} {
        \colprefix
        \node[scale=.9,font=\bfseries\sffamily] (\i) at (0,-.575*\i) {\makebox[1.15em][c]{\strut\letter}};
        \ifnum\ascii>0
        % default to gray here
        \color{gray}\colprefix
        \onslide<13->{\node[scale=.9,right=-1mm,font=\scriptsize\sffamily] (\i b) at (\i.east) {\T{\makebox[2em][r]{\ascii}}};}
        \colprefix
        \onslide<14->{\node[scale=.9,right=-1mm,font=\scriptsize\sffamily] (\i c) at (\i b.east) {\T{\makebox[2em][r]{\the\numexpr\ascii-65}}};}
        \fi
    }}
    \onslide<14->{\node[above,gray] at(0c.north) {~~~~\T{\footnotesize c\,-\,'A'}};}

    \onslide<15->{\draw[{Kite[round,scale=.9]}-{Kite[round,scale=.9]},rounded corners=3pt] ([yshift=-2mm]2.100) -- ++(0,3.125mm) -| ([xshift=-4mm,yshift=-.5mm]7.260) coordinate[pos=.75] (@) -| ([yshift=2.35mm]7.260);
        \node[left] (@b) at(@) {Wrap-Around mit Modulo!};
        \node[below left,yshift=2mm,xshift=-.5mm,align=right,T] at(@b.south east) {Wir normalisieren, um nicht die 65\\durch das Modulo zu verlieren.};
    }
    \onslide<17->{\path(base.north)--(base@.north) coordinate[pos=.5] (@);
        \draw[Kite-,codeouthl] ([xshift=5mm]@.north) to[bend right] ++(-.45,.25) node[left,T] {Für Kleinbuchstaben ändert sich die Normalisierung};
    }
    \onslide<19->{
        \draw[Kite-,codeouthl] (magic-num.south) to[bend right] ++(.5,-.5) node[right,align=left,T] {Magic-Number (Alphabeeet)};
    }
    \onslide<20->{
        \draw[Kite-,codeouthl] (floorMod.south) to[bend left] ++(-.5,-.35) node[left,T] {Javas '\T{\%}' beachtet das Vorzeichen!};
    }
\endscope
\end{tikzpicture}
\end{frame}

\iffull
{\AddonFrame
\begin{frame}[fragile]{Eine alternative Rotation}
\begin{tikzpicture}[@O]
\onslide<13->{\def\hlcolor{gray}
\hlbehindcode[.25pt]{26a}{@26a>}
\hlbehindcode[.25pt]{26b}{@>}
}
\onslide<14->{\def\hlcolor{paletteA}
\hlbehindcode[.25pt]{25}{@25>}
}
\end{tikzpicture}\vspace*{-\baselineskip}
\begin{itemize}[<+(1)->]
    \itemsep4pt
    \item Und was machen wir ohne Modulo? Wir können Schleifen verwenden!
    \item Zusätzlicher Bonus? Es genügt das Anpassen von \bjava{addCyclicOnBase(char, char)}:
\begin{plainjava}
!*\CodeFileMarkerAttach<5->{CharRotationLoops.java}*!
!*\onslide<4->*!private static char addCyclicOnBase(char base, char c) {
!*\onslide<5->*!    int shiftedBase = c + n;!*\Snode{apply}*!
!*\onslide<8->*!    while(shiftedBase < base)
!*\onslide<8->*!        shiftedBase += !*\Snode{26a}*!26!*\Snode{26a@}*!;!*\Snode{cycle}*!
!*\onslide<10->*!    while(shiftedBase > base + !*\Snode{25}*!25!*\Snode{25@}*!)
!*\onslide<10->*!        shiftedBase -= !*\Snode{26b}*!26!*\Snode{26b@}*!;
!*\onslide<11->*!    return (char) shiftedBase;
!*\onslide<4->*!}
\end{plainjava}
\end{itemize}\vspace*{-.4\baselineskip}
\begin{center}
    \scalebox{.9}{\begin{tikzpicture}
        \onslide<6->{\foreach[count=\i from 0] \colprefix/\letter/\ascii in {\color{codeouthl}/?/63,\color{codeouthl}/@/64,/A/65,/B/66,/C/67,\color{codeouthl}/\ldots/0,/Y/89,/Z/90,\color{codeouthl}/[/91,\color{codeouthl}/\textbackslash/92} {
            \colprefix\node[font=\bfseries\sffamily] at(\i,0) {\letter};
        }}
        \onslide<7->{
            \draw[thick,line cap=round] (2-.5,-.5) -- ++(0,1) node[below left,yshift=3mm,scale=.85] {\T{< 'A'}};
        }
        \onslide<9->{
            \draw[thick,line cap=round] (8-.5,-.5) -- ++(0,1) node[below right,yshift=3mm,scale=.85] {\T{'Z' < }};
        }
    \end{tikzpicture}}
\end{center}
\begin{tikzpicture}[@O]
    \onslide<12->{\node[T,right] at (apply.east) {Füge offset hinzu};}
    \onslide<14->{\node[T,right] at(cycle) {Verschiebe solange um Zyklusbreite, bis (wieder) in Zyklus!};}
    \onslide<15->{
        \draw[lightgray,-Kite] (@25>_down) to[bend right] ++(.5,-.5) node[right, T] {\T{'A' + \textup{25}} $\widehat{=}$ \T{'Z'}};
    }
\end{tikzpicture}
\end{frame}
}
\fi

\begin{frame}[fragile]{Ein Beispiel zum Abschluss}
\SetupLstHl
\begin{itemize}[<+(1)->]
    \itemsep3pt
    \item Nun verbleibt es jedes Zeichen im Array zu verschieben:
\begin{plainjava}
!*\onslide<3->*!public static void rotiereCharacterArray(char[] arr) {
!*\onslide<4->*!    for (int i = 0; i < arr.length; i++) {
!*\onslide<5->*!        arr[i] = rotiereCharacter(arr[i]);
!*\onslide<4->*!    }
!*\onslide<3->*!}
\end{plainjava}
    \item<6-> Nun gilt es noch aufzurufen:
\begin{plainjava}
!*\onslide<7->*!|ihl|public class CharRotation {|ihl|
!*\onslide<8->*!    public static void main(String[] args) {
!*\onslide<9->*!        char[] arr = { 'a', 'Z' };
!*\onslide<10->*!        rotiereCharacterArray(arr);
!*\onslide<11->*!        System.out.println(arr);!*\Snode{newarr}*!
!*\onslide<8->*!    }
!*\onslide<7->*!|ihl|}|ihl|
\end{plainjava}
\end{itemize}
\begin{tikzpicture}[@O]
    \onslide<12->{\node[T,right=3mm] at(newarr.east) {\T{System.out.println(char[])}};}
    \onlyhandout<13->{\node[above left,yshift=\btdmfootheight] at (current page.south east) {\textattachfile{\curpath CharRotation.java}{CharRotation.java}\;};}
\end{tikzpicture}
\end{frame}

{\AddonFrame
\begin{frame}{Refactoring}
 \begin{itemize}[<+(1)->]
    \itemsep9pt
     \item Die auf den Folien gezeigte Vorgehensweise ist irreführend
     \item Insbesondere wenn es aufwändiger wird, schreibt niemand direkt solchen Code
     \item Das Stichwort lautet \textit{Refactoring}
        \begin{itemize}
            \itemsep4pt
            \item Code lässt sich immer aufräumen und leserlicher, testbarer,~\ldots\ gestalten
            \item Die eigentliche Implementierung nimmt relativ wenig Zeit ein\smash{\textsuperscript{\cite{10.5555/2820282.2820289}}} \infoblock{Die meiste Zeit \say{stirbt} für das Verstehen von bestehendem Code (je nach Größe rund \qty{70}\percent), aber auch Testen und Anforderungsdefinitionen bekommen einen Teil.}
            \item Selbst bei kleinen Projekten \info{ungefähr \num{1000} Zeilen} nimmt die Entwicklung nur $\approx$\qty{50}\percent\ Zeit ein
        \end{itemize}
     \item Nehmt euch doch am Ende 20~Minuten und versucht euren Code zu verbessern
 \end{itemize}
\end{frame}
}

\subsection{Aufgabe 3}
{\taskenum
\begin{frame}{Aufgabe 3: Objektorientierung: Klassenentwurf}
    \task<2->{In der Vorlesung haben Sie die Grundlagen der Objektorientierung kennengelernt und anhand zweier Beispiele (Auto
    und Nachttischlampe auf Folie~\sout{13}\,15, Kapitel~\sout{6}\,7) einen Klassenentwurf gesehen. Entwerfen Sie nach dem in der Vorlesung
    vorgestellten Muster die folgenden Klassen (es ist noch keine Java Implementierung notwendig und bitte geben Sie
    auch keine für diese Aufgabe ab).
\begin{enumerate}
    \item<3-> Entwerfen Sie eine Klasse, die einen \T{Artikel} in einem Online Shop repräsentieren soll. Überlegen Sie sich hierzu, welche Eigenschaften (\textit{Attribute}) und Funktionen (\textit{Methoden}) diese Klasse besitzen soll. Geben Sie Datentypen der Attribute so an: \say{Attributname: Datentyp}. Analog dazu können Sie die Rückgabetypen von Methoden angeben.
    \item<4-> Geben Sie eine Instanz der Klasse \T{Artikel} an.
    \item<5-> Als nächstes soll nun die Klasse \T{Warenkorb} entworfen werden. Überlegen Sie sich hierzu insbesondere, wie die \T{Artikel} in einem \T{Warenkorb} modelliert werden können.
    \item<6-> Geben Sie eine Instanz der Klasse \T{Warenkorb} an.
\end{enumerate}
    }
\end{frame}

\begin{frame}[fragile]{Ein Artikel, der die Weld verändern wird!}
\begin{enumerate}
    \item<2-> \task{Entwerfen Sie eine Klasse, die einen \T{Artikel} in einem Online Shop repräsentieren soll. Überlegen Sie sich hierzu, welche Eigenschaften (\textit{Attribute}) und Funktionen (\textit{Methoden}) diese Klasse besitzen soll.}
    \item<10-> \task{Geben Sie eine Instanz der Klasse \T{Artikel} an.}
\end{enumerate}
\begin{center}
    \scalebox{.65}{\begin{tikzpicture}
\tikzumlset{fill class=btdm@background}
\onslide<3->{\umlclass[x=0,y=0]{Artikel}{
\onslide<4->{Name: String}\\
\onslide<4->{Preis: float}\\
\onslide<5->{Artikelnummer: String}\\
\onslide<6->{Gewicht: float}\\
\onslide<6->{Farbe: String}\\
}{
\onslide<7->{änderePreis(neuerPreis: float): void}\\
\onslide<8->{färbe(neueFarbe: String): void}\\
}}
\onslide<9->{\fill[lightgray] ([xshift=-10.5mm,yshift=6.55mm]Artikel.center) circle[radius=1mm] coordinate (@1);
\fill[lightgray] ([xshift=-5mm,yshift=-2mm]Artikel.center) circle[radius=1mm] coordinate (@2);
\fill[lightgray] ([xshift=-7.5mm,yshift=-6mm]Artikel.center) circle[radius=1mm] coordinate (@3);
\draw[lightgray] (@3) to[out=0,in=240] ++(3cm,.75cm) coordinate (@);
\draw[lightgray] (@2) to[out=0,in=190] (@);
\draw[lightgray] (@1) to[out=0,in=170] (@);
\fill[lightgray] (@) circle[radius=1mm];
\draw[lightgray] (@) to[out=0,in=180] ++(2cm,.5cm) node[T,right,align=left] {Hier kommen auch\\eigene Datentypen\\in Frage!};}

\onslide<11->{\umlclass[x=12.5,y=0,rounded corners=4pt]{Objekt: Mein Hemd}{
    \onslide<12->{Name: \dq Hemd\dq}\\
    \onslide<12->{Preis: 42.99f}\\
    \onslide<13->{Artikelnummer: \dq MC-0042\dq}\\
    \onslide<14->{Gewicht: 0.3f}\\
    \onslide<14->{Farbe: \dq octarine\dq{}\smash{\textsuperscript{\cite{pratchett1983magic}}}}
}{
    \onslide<15->{änderePreis(neuerPreis: float): void}\\
    \onslide<15->{färbe(neueFarbe: String): void}\\
}}
\end{tikzpicture}}
\end{center}\vfill
\begin{center}
    \onslide<16->{Manchmal werden im Objektdiagramm auch keine Methoden wiederholt oder Methoden angepasst. Sichtbarkeiten haben wir hier vernachlässigt.}
\end{center}
\end{frame}

\begin{frame}[fragile]{Shopping Spreeeeeee}
\begin{enumerate}
    \setcounter{enumi}{2}
    \item<2-> \task{Als nächstes soll nun die Klasse \T{Warenkorb} entworfen werden. Überlegen Sie sich hierzu insbesondere, wie die \T{Artikel} in einem \T{Warenkorb} modelliert werden können.}
    \item<9-> \task{Geben Sie eine Instanz der Klasse \T{Warenkorb} an.}
\end{enumerate}\vfill
\begin{center}
    \scalebox{.65}{\begin{tikzpicture}
\tikzumlset{fill class=btdm@background}
\onslide<3->{\umlclass[x=0,y=0,text=black]{Warenkorb}{
\onslide<4->{Kundennummer: int}\\
\onslide<5->{Artikelliste: \color{black}\solGet{keywordC}{Artikel}\color{black}[]}\\
}{
\onslide<6->{fügeArtikelHinzu(Artikel: \solGet{keywordC}{Artikel}\color{black}): void}\\
\onslide<7->{\color{black}entferneArtikel(index: int): boolean}\\
\onslide<8->{\color{black}berechneGesamtpreis(): float}\\
}}

\onslide<10->{\umlclass[x=10,y=0,rounded corners=4pt,text=black]{Objekt: Mein Warenkorb}{
    \onslide<11->{Kundennummer: 744392}\\
    \onslide<12->{Artikelliste: [\textit{Mein Hemd}]}
}{
    \onslide<13->{fügeArtikelHinzu(Artikel: \solGet{keywordC}{Artikel}\color{black}): void}\\
    \onslide<13->{\color{black}entferneArtikel(index: int): \solGet{keywordC}{Artikel}}\\
    \onslide<13->{\color{black}berechneGesamtpreis(): float}\\
}}
\end{tikzpicture}}
\end{center}
\begin{itemize}
    \item<14-> Es ist nicht unbedingt notwendig, mit \textit{Main Hemd}, ein Objekt zu referenzieren \begin{itemize}
        \itemsep2.5pt
        \item<15-> Je nach Problem, reicht vielleicht auch einfach die Artikelnummer, da sie eindeutig ist.
        \item<16-> Man kann das Objekt auch an Ort und Stelle \say{schreiben}\infoblock{Dann mit meist in \link{https://www.json.org/json-de.html}{JSON}-(ähnlicher)-Syntax \T{\{Name: \dq Hemd \dq, Preis: 42.99f, \textcolor{codeouthl}{\ldots}\}}}
    \end{itemize}
\end{itemize}
\end{frame}

\iffull
{\AddonFrame
\begin{frame}{Zwischenkommentar an Kasse~3 bitte}
    \begin{itemize}[<+(1)->]
        \itemsep5pt
        \item Die so gewählte Darstellungsform ist suboptimal \begin{itemize}
            \itemsep3pt
            \item \say{\T{Gewicht: 0.3f}}~--- \num{0.3} \textit{was?} Gramm? Kilogramm? Tonnen? Pfund? \qty{30}\percent\ eines Anzugs?
            \item Welchen Artikel soll die Methode \T{entferneArtikel} zurückliefern? Den entfernten, den neuen an dieser Position,~\ldots\,?
            \item Sind alle Eigenschaften verpflichtend? Oder gibt es z.B. Artikel ohne Farbe?
            \item Drückt man das wiederum durch eine besondere Farbe aus?
        \end{itemize}
        \item Für diese Veranstaltung interessiert uns aber mehr die Frage, wie wir Probleme in Klassen aufteilen und was diese Klassen dann für Attribute und Methoden haben.
        \item In dieser Aufgabe waren \info{zumindest halbwegs} sinnvolle Attribute und Methoden ausreichend
    \end{itemize}
\end{frame}
}
\fi
}

% \iffull{\AddonFrame
% \begin{frame}
%     Wie hätte das als Klasse ausgesehen?
% \end{frame}
% }\fi



\SetNextSectionText{Aber die Sprache um ein Wort ärmer machen heißt das Denken der Nation um einen Begriff ärmer machen\\Arthur Schopenhauer~--- \cite[II, chp.~12]{schopenhauer1859welt}}
\section{Terminologien}
\iffull
\begin{frame}[fragile]{Ein Beispiel}
\begin{itemize}[<+(1)->]
    \itemsep8pt
    \item Wir möchten das aufsummierte Alter eines Array an Pinguinen
    \item In diesem Zuge möchte ich ein paar Begriffe klären
    \item Pinguine beschreiben wir \info{mit ganz viel Liebe\ldots\ ich meine} wie folgt\ldots
\end{itemize}
\end{frame}
\fi

\begin{frame}[fragile,c]{Pinguineeee --- Struktur}
\lstfs{9}\def\hlopa{.4}
\begin{tikzpicture}[@O]
    \def\hlcolor{pingu@green!82!pingu@black}
    \onslide<12->{
        \hlbehindcodeunder{Penguin}{@Pengu>}
    }
    \onslide<17->{
        \hlbehindcodeunder{Penguin_ctor}{@Pengu_ctor>}
    }
    \def\hlcolor{pingu@yellow}
    \onslide<14->{
        \hlbehindcodeunder{Penguin_age}{@Pengu_age>}
        \hlbehindcodeunder{Penguin_name}{@Pengu_name>}
    }
    \onslide<22->{
        \hlbehindcodeunder{age_1}{@>}
        \hlbehindcodeunder{name_1}{@>}
    }
    \onslide<25->{
        \hlbehindcodeunder{age_3}{@>}
        \hlbehindcodeunder{age_4}{@>}
        \hlbehindcodeunder{name_3}{@name_last>}
    }
    \def\hlcolor{pingu@blue}
    \onslide<19->{
        \hlbehindcodeunder{Penguin_ctor_age}{@Pengu_ctor_age>}
        \hlbehindcodeunder{Penguin_ctor_name}{@Pengu_ctor_name>}
    }
    \onslide<22->{
        \hlbehindcodeunder{age_2}{@>}
        \hlbehindcodeunder{name_2}{@>}
    }
    \def\hlcolor{pingu@red}
    \onslide<24->{
        \hlbehindcodeunder{getAge}{@getAge>}
        \hlbehindcodeunder{toString}{@>}
    }
\end{tikzpicture}\vspace*{-1.33\baselineskip}
%,morekeywords={[3]{Penguin}}]
\begin{plainjava}[lineskip=4pt]
!*\CodeFileMarkerAttach<3->{Penguin.java}*!
!*\onslide<2->*!public class !*\Snode{Penguin}*!Penguin!*\Snode{Penguin@}*! {!*\Snode{classline}*!
!*\onslide<4->*!   private final int !*\Snode{Penguin_age}*!!*\tikzmarknode{age}{age}*!!*\Snode{Penguin_age@}*!;
!*\onslide<5->*!   final String !*\Snode{Penguin_name}*!!*\tikzmarknode{name}{name}*!!*\Snode{Penguin_name@}*!;
!*\onslide<2->*!
!*\onslide<6->*!   public !*\Snode{Penguin_ctor_full}*!!*\Snode{Penguin_ctor}*!Penguin!*\Snode{Penguin_ctor@}*!(String !*\Snode{Penguin_ctor_name}*!name!*\Snode{Penguin_ctor_name@}*!, int !*\Snode{Penguin_ctor_age}*!age!*\Snode{Penguin_ctor_age@}*!)!*\Snode{Penguin_ctor_full@}*! {!*\Snode{ctor}*!
!*\onslide<7->*!       !*\Snode{name_assignment}*!this.!*\Snode{name_1}*!name!*\Snode{name_1@}*! = !*\Snode{name_2}*!name!*\Snode{name_2@}*!;!*\Snode{name_assignment@}*!
!*\onslide<7->*!       !*\Snode{age_assignment}*!this.!*\Snode{age_1}*!age!*\Snode{age_1@}*! = !*\Snode{age_2}*!age!*\Snode{age_2@}*!;!*\Snode{age_assignment@}*!
!*\onslide<6->*!   }

!*\onslide<8->*!   public int !*\Snode{getAge}*!getAge!*\Snode{getAge@}*!() { return !*\Snode{age_3}*!age!*\Snode{age_3@}*!; }!*\Snode{ageStart}*!
!*\onslide<9->*!   public String !*\Snode{toString}*!toString!*\Snode{toString@}*!() {
!*\onslide<10->*!      return !*\Snode{name_3}*!name!*\Snode{name_3@}*! + " watschelt seit " + !*\Snode{age_4}*!age!*\Snode{age_4@}*! + " Jahr(en)";!*\Snode{longest}*!
!*\onslide<9->*!   }!*\Snode{toStringEnd}*!
!*\onslide<2->*!}
\end{plainjava}
\begin{tikzpicture}[@O]
    \onslide<11->{\node[right,T] at(classline.east) {Die Pinguin-Klasse!};}
    \onslide<13->{
         \draw[lightgray,-Kite] (@Pengu>_up) to[out=50,in=180] ++(.5,.25) node[right, T] {Muss gleich heißen wie Datei (Groß- und Kleinschreibung beachten)!};
    }
    \onslide<15->{
        \draw[decoration=brace,decorate,lightgray] ([xshift=2mm,yshift=1.5mm]age.north east) coordinate (@) to[edge node={node[right=1mm,T] {Attribute der Klasse. Sie definieren den \textbf{Zustand}.}}] ([yshift=-1.5mm]name.south east-|@);
    }
    \onslide<16->{\node[right,T,yshift=.33mm] at(ctor.east) {Der Konstruktor liefert den \textbf{initialen Zustand}};}
    \onslide<18->{
        \draw[lightgray,-Kite] (@Pengu_ctor>_up) to[bend left] ++(.5,.235) node[right, T] {Muss gleich heißen wie die Klasse! Er ist damit auch keine Methode};
    }

    \onslide<19->{
        \draw[lightgray,-Kite] (@Pengu_ctor_age>_down) to[out=300,in=180] ++(.5,-.35) node[right, T] (@) {Die Parameter (können beliebig heißen)};
        \draw[lightgray,-Kite] (@Pengu_ctor_name>_down) to[out=300,in=180] (@.west);
    }

    \onslide<20->{
        \node[below right=2mm,yshift=-5mm,T] (@) at(@Pengu_ctor_name>_down) {\T{new Penguin(\dq Piep\dq, 3);} \faCheck};
        \onslide<21->{
            \node[right=2mm,T] (@) at(@.east) {\T{new Penguin();} \faFlash};
            \node[below left,xshift=9mm,yshift=1.25mm, T, codeouthl, scale=.85,align=right] (@) at(@.south east) {Der leere default-Konstruktor existiert nur genau dann, wenn kein expliziter existiert.\\Hier existiert \T{Penguin(String, int)}.};
        }
    }
    \onslide<23->{
        \draw[decoration=brace,decorate,lightgray] ([xshift=2mm,yshift=1.5mm]ageStart.north east-|longest.east) coordinate (@) to[edge node={node[right=1mm,T,align=left] {Methoden der Klasse.\\Sie definieren das \textbf{Verhalten}.}}] ([yshift=-1.5mm]toStringEnd.south east-|@);
    }
    \onslide<26->{
        \node[above,T] at (@getAge>_up) {Ein stinknormaler Getter};
    }
    \onslide<27->{
        \node[below right,T,text width=10cm,xshift=-1.8cm] at(@name_last>_down) {toString ist in Java \say{besonders} (durch \T{\link{https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html\#toString()}{Object}}). Es wird z.B. bei (String-)Konkatenation automatisch aufgerufen.};
    }
\end{tikzpicture}
\end{frame}

\begin{frame}[fragile,c]{Pinguineeee --- Gültigkeit \& Sichtbarkeit}
\lstfs{9}\def\hlopa{.4}
\begin{tikzpicture}[@O]
\def\hlcolor{pingu@green!82!pingu@black}
\onslide<6->{
    \hlbehindcodeunder{@Penguin_age}{@>}
}
\onslide<11->{\hlbehindcodeunder{@age_1}{@>}}
\onslide<12->{\hlbehindcodeunder{@age_3}{@@age3>}}
\onslide<13->{\hlbehindcodeunder{@age_4}{@>}}
\def\hlcolor{pingu@yellow}
\onslide<7->{
    \hlbehindcodeunder{@Penguin_name}{@>}
}
\onslide<11->{\hlbehindcodeunder{@name_1}{@>}}
\onslide<13->{\hlbehindcodeunder{@name_3}{@@name3>}}
\def\hlcolor{pingu@blue}
\onslide<8->{
    \hlbehindcodeunder{@Penguin_ctor_name}{@>}
}
\onslide<11->{\hlbehindcodeunder{@name_2}{@>}}
\def\hlcolor{pingu@red}
\onslide<9->{
\hlbehindcodeunder{@Penguin_ctor_age}{@@Penguin_ctor_age>}
}
\onslide<11->{\hlbehindcodeunder{@age_2}{@>}}

\end{tikzpicture}\vspace*{-1.33\baselineskip}
%,morekeywords={[3]{Penguin}}]
\begin{plainjava}[lineskip=4pt]
!*\onslide<2->*!!*\CodeFileMarker{Penguin.java}*!
!*\onslide<2->*!!*\Snode{@CLASS}*!public class !*\Snode{@Penguin}*!Penguin!*\Snode{@Penguin@}*! {!*\Snode{@classline}*!
!*\onslide<2->*!   private final int !*\Snode{@Penguin_age}*!!*\tikzmarknode{@age}{age}*!!*\Snode{@Penguin_age@}*!;!*\Snode{@ageline}*!
!*\onslide<2->*!   final String !*\Snode{@Penguin_name}*!!*\tikzmarknode{@name}{name}*!!*\Snode{@Penguin_name@}*!;
!*\onslide<2->*!
!*\onslide<2->*!   !*\Snode{@CTOR}*!public !*\Snode{@Penguin_ctor_full}*!!*\Snode{@Penguin_ctor}*!Penguin!*\Snode{@Penguin_ctor@}*!(String !*\Snode{@Penguin_ctor_name}*!name!*\Snode{@Penguin_ctor_name@}*!, int !*\Snode{@Penguin_ctor_age}*!age!*\Snode{@Penguin_ctor_age@}*!)!*\Snode{@Penguin_ctor_full@}*! {!*\Snode{@ctor}*!
!*\onslide<2->*!       !*\Snode{@name_assignment}*!this.!*\Snode{@name_1}*!name!*\Snode{@name_1@}*! = !*\Snode{@name_2}*!name!*\Snode{@name_2@}*!;!*\Snode{@name_assignment@}*!
!*\onslide<2->*!       !*\Snode{@age_assignment}*!this.!*\Snode{@age_1}*!age!*\Snode{@age_1@}*! = !*\Snode{@age_2}*!age!*\Snode{@age_2@}*!;!*\Snode{@age_assignment@}*!
!*\onslide<2->*!   !*\Snode{@CTOR@}*!}

!*\onslide<2->*!   public int !*\Snode{@getAge}*!getAge!*\Snode{@getAge@}*!() { return !*\Snode{@age_3}*!age!*\Snode{@age_3@}*!; }!*\Snode{@ageStart}*!
!*\onslide<2->*!   public String !*\Snode{@toString}*!toString!*\Snode{@toString@}*!() {
!*\onslide<2->*!      return !*\Snode{@name_3}*!name!*\Snode{@name_3@}*! + " watschelt seit " + !*\Snode{@age_4}*!age!*\Snode{@age_4@}*! + " Jahr(en)";!*\Snode{@longest}*!
!*\onslide<2->*!   }!*\Snode{@toStringEnd}*!
!*\onslide<2->*!!*\Snode{@CLASS@}*!}
\end{plainjava}
\def\K{\multicolumn{1}{Y{45}{1em}}}
\begin{tikzpicture}[@O]
    \onslide<3->{{\iffull\else\color{gray}\fi\node[below left=4mm,xshift=-6mm,yshift=-1.25cm,text width=7cm,scale=.55] at(current page.north east) {\centering\begin{tabular}{l *4{>{\centering\arraybackslash}m{1.25em}}@{\hskip23pt}l}
        & \K{Selbe Klasse} & \K{Selbes Paket} & \K{\color{codeouthl}Unterklasse} & \K{Überall sonst} & Beispiel\\[5pt]
    \T{public} & \faCheck & \faCheck & \color{codeouthl}\faCheck & \faCheck & \T{age}\\
    \T{\color{codeouthl}protected} & \color{codeouthl}\faCheck & \color{codeouthl}\faCheck & \color{codeouthl}\faCheck & & ---\\
    $\langle$nichts\kern.5pt$\rangle$ & \faCheck & \faCheck & & & \T{name}\\
    \T{private} & \faCheck & & & & \T{Penguin} % solGet{keywordC}
    \end{tabular}\medskip\\\centerline{\Large\color{gray}\textbf{Sichtbarkeits}modifikatoren}};}}
    \onslide<4->{\node[right,T] at(classline.east) {Objekte leben, wie mind. eine Referenz auf sie gültig ist};}
    \onslide<5->{
        \draw[decoration=brace,decorate,lightgray] ([xshift=2mm,yshift=1.5mm]@age.north east) coordinate (@) to[edge node={node[right=1mm,T,align=left] {Die Attribute besitzen die selbe \textbf{Gültigkeit},\\wie das Objekt, dem sie gehören.}}] ([yshift=-1.5mm]@name.south east-|@);
    }
    \onslide<6->{
        \fill[rounded corners=1.6pt,pingu@green!82!pingu@black,opacity=\hlopa] ([xshift=1mm,yshift=-5pt]@CLASS) rectangle ([xshift=1mm-3.2pt,yshift=5pt]@CLASS@);
        \path ([xshift=1mm-3.2pt,yshift=-5pt]@CLASS) to[edge node={node[left,T,scale=.8] {\rotatebox{90}{Gültigkeit}}}] ([xshift=1mm-3.2pt,yshift=5pt]@CLASS@);
    }
    \onslide<7->{
        \fill[rounded corners=1.6pt,pingu@yellow,opacity=\hlopa] ([xshift=1mm+1.5mm,yshift=-5pt]@CLASS) rectangle ([xshift=1mm+1.5mm-3.2pt,yshift=5pt]@CLASS@);
    }
    \onslide<8->{
        \fill[rounded corners=1.6pt,pingu@blue,opacity=\hlopa] ([xshift=1mm,yshift=-5pt]@CTOR) rectangle ([xshift=1mm-3.2pt,yshift=5pt]@CTOR@);
    }
    \onslide<9->{
        \fill[rounded corners=1.6pt,pingu@red,opacity=\hlopa] ([xshift=1mm+1.5mm,yshift=-5pt]@CTOR) rectangle ([xshift=1mm+1.5mm-3.2pt,yshift=5pt]@CTOR@);
    }
    \onslide<10->{
        \node[below right,text width=8.5cm,yshift=-1mm,xshift=-1.5cm,T] at(@@Penguin_ctor_age>_down) {Die Parameter \textbf{überschatten}~(\link{https://docs.oracle.com/javase/specs/jls/se17/html/jls-6.html\#jls-6.4}{JLS17~$6.4$}) die gleichnamigen Attribute. Wir benötigen nun \T{this} um auf diese zuzugreifen.};
    }
    \onslide<12->{
        \node[above right=1mm,xshift=-1cm,T] at(@@age3>_up) {Das \T{age}-Attribut wird hier nicht überschattet.};
    }
    \onslide<13->{
        \node[below right=1mm,xshift=-1cm,T] at(@@name3>_down) {Beide Attribute werden nicht überschattet!};
    }
\end{tikzpicture}
\end{frame}

{\def\gets#1#2#3{\onslide<#1->{\makebox[8em][l]{\bjava{#2}}}~\edef\outtmp{\the\numexpr#1+1}\onslide<\outtmp->{\textcolor{codeouthl}{$\to$~\T{#3}}}}
\begin{frame}[fragile]{Defaultkonstruktoren und -Werte}
    \begin{itemize}[<+(1)->]
        \itemsep3.25pt
        \item Java erzeugt genau dann einen default-Konstruktor, wenn kein expliziter existiert
        \item Konstruktoren sind keine Methoden, können aber z.B. überladen werden\onslide<4->{\infoblock{Überladen heißt: gleicher Name, aber andere Signatur (Name \& Parametertypliste)}} \begin{itemize}
            \item<5-> Ein Konstruktor kann nur mit \bjava{new} aufgerufen werden
            \item<6-> Er hat keinen Rückgabetyp
            \item<7-> Er muss genau so heißen wie die Klasse
            \item<8-> Er kann andere Konstruktoren über \bjava{this} aufrufen (erstes Statement)
        \end{itemize}
        \item<9-> Wie bei Arrays, weißt Java Attributen default-Werte zu, wenn wir dies nicht tun:
    \end{itemize}
\begin{columns}[onlytextwidth,c]
\column{.5\linewidth}
\begin{plainjava}[morekeywords={[3]{Waddler}}]
!*\onslide<10->*!public class Waddler {
!*\onslide<10->*!    int age;
!*\onslide<10->*!    float speed;
!*\onslide<10->*!    char[] directions;
!*\onslide<10->*!    boolean[][] canWaddleOn;
!*\onslide<10->*!}!*\onslide<1->*!
\end{plainjava}
\column{.5\linewidth}
\onslide<11->{\bjava[morekeywords={[3]{Waddler}}]{Waddler w = new Waddler();}}\\
\gets{12}{w.age}{0}\\
\gets{14}{w.speed}{0.0f}\\
\gets{16}{w.directions}{null}\\
\gets{18}{w.canWaddleOn}{null} \onslide<20->{\info{kein \T{new}!}}\\
% \onslide<20->{\(\longrightarrow\) Die Initialisierung von Arrays erfolgt erst mit \bjava{new}.}
\end{columns}
\end{frame}
}

% \begin{frame}{TODO: final und soo}
% \end{frame}

\begin{frame}[fragile,c]{Die Summierung}
\lstfs{9}
% handouts not on compact
\iffull
\AnimateCode{onslide={%
   :10:{15}, % main
   :11:{12},
   % "Hugo watschelt seit 3 Jahr(en)" as custom comment because i wanta keep it
   13, 14, % TODO: jump mid
   :3:{8},
   4,% :{\T{sum = 0}},% TODO: will be written custom as well
   /5:{\T{i = 0}\quad (\T{0 < 2})},
   /6:{\T{sum = 3}},
   |5:{\T{i = 1}\quad  (\T{1 < 2})},
   /6:{\T{sum = 10}}, % TODO: rewrite old comments
   |5:{\T{i = 2}\quad (\T{2 < 2})},
   .7,%:{\T{sum = 10}},
   *\Line{14}\Location{end}\Reset\Comment{10}%
},handout={16/2,22/3,26/4},first slide=14}
\else % hacky
\AnimateCode{onslide={%
   :10:{15}, % main
   :11:{12},
   % "Hugo watschelt seit 3 Jahr(en)" as custom comment because i wanta keep it
   13, 14, % TODO: jump mid
   :3:{8},
   4,% :{\T{sum = 0}},% TODO: will be written custom as well
   /5:{\T{i = 0}\quad (\T{0 < 2})},
   /6:{\T{sum = 3}},
   |5:{\T{i = 1}\quad  (\T{1 < 2})},
   /6:{\T{sum = 10}}, % TODO: rewrite old comments
   |5:{\T{i = 2}\quad (\T{2 < 2})},
   .7,%:{\T{sum = 10}},
   *\Line{14}\Location{end}\Reset\Comment{10}%
},handout={},first slide=14}
\fi
\begin{plainjava}[morekeywords={[3]{Penguin}}]
!*\CodeFileMarkerAttach<3->{PenguSum.java}*!
!*\onslide<2->*!public class PenguSum {
!*\onslide<4->*!   static long sum(Penguin[] ps) {!*\Snode{sum}*!
!*\onslide<5->*!      long sum = 0;
!*\onslide<6->*!      for (int i = 0; i < ps.length; i++)
!*\onslide<6->*!         sum += ps[i].getAge();
!*\onslide<7->*!      return sum;
!*\onslide<4->*!   }
!*\onslide<2->*!
!*\onslide<8->*!   public static void main(String[] args) {
!*\onslide<9->*!      Penguin[] pengus = { !*\onslide<10->*!new Penguin("Hugo", 3),
!*\onslide<9->*!        !*\onslide<10->*!new Penguin("Sophie", 7) !*\onslide<9->*!};
!*\onslide<11->*!      System.out.println(pengus[0]);
!*\onslide<12->*!      System.out.println(sum(pengus));
!*\onslide<8->*!   }
!*\onslide<2->*!}!*\onslide<1->*!
\end{plainjava}
\endAnimateCode
\begin{tikzpicture}[@O]
    \onslide<13->{\node[right,T] at(sum) {\textup{\T{sum(Penguin[])}}};}
    \onslide<16|handout:\iffull2\else0\fi>{\node[ca@CommentNode] at(ca@@-13@end) {Hugo watschelt seit 3 Jahr(en)};}
    \onslide<17-|handout:\iffull3-\else0\fi>{\node[ca@CommentNode@out] at(ca@@-13@end) {Hugo watschelt seit 3 Jahr(en)};}
    \onslide<19|handout:0>{\node[ca@CommentNode] at(ca@@-4@end) {\T{\strut sum = 0}};}
    \onslide<20|handout:0>{\node[ca@CommentNode@out] at(ca@@-4@end) {\T{\strut sum = 0}};}
    \onslide<21-22|handout:\iffull3\else0\fi>{\node[ca@CommentNode@out] at(ca@@-4@end) {\T{\strut sum = 3}};}
    \onslide<23-25|handout:0>{\node[ca@CommentNode@out] at(ca@@-4@end) {\T{\strut sum = 10}};}
    \onslide<26->{\node[below left,T,align=right,yshift=-1.5cm] at(current page.north east) {Hier ist Platz für Heap und Stack.\\Oh, schon 2~Uhr.\\Das wird eine Tafelnummer};}
\end{tikzpicture}
\end{frame}

% \begin{frame}{TODO:}
%     TOPDO: heap-darstellung mit mehr chaos für Chlassen

%     TODO: Klassenentwurf vom letztenmal :D
%     TODO: Begriffe fundieren
% \end{frame}

\iffull
\SetNextSectionText{Grundlagen der OOP\\Abgabe: \DTMDate{2022-06-07}}
\section{Aussicht: Übungsblatt 6}
\begin{frame}{Ein kurzer Blick Zurück}
    \begin{itemize}[<+(1)->]
        \itemsep5pt
        \item Alles was ich zu den Aufgaben auf dem nächsten Blatt sagen könnte, findet sich schon auf den Folien \info{dies schließt auch letzte Woche mit ein}
        \item Man werfe einen Blick zurück!
        \item Aber: sich kurz zu fassen heißt nicht, wichtiges auszulassen \begin{itemize}
            \item Die Idee ist eher, dass ihr kurze Beschreibungen findet die alles wichtiges beinhalten
            \item Ob dabei wohl Fachbegriffe hilfreich sind?
        \end{itemize}
        \item Bei Aufgabe 3 wollen wir die geänderte Java-Datei!
    \end{itemize}
\end{frame}
\fi



\SetNextSectionText[.55\linewidth]{Those who cannot remember the past are condemned to repeat it.\\George Santayana~--- \cite{santayana1905life}}
\section{Abschließendes}
{\SummaryFrame
\begin{frame}[t]{Zusammenfassend}
\pause \printBibCommand
\vfill\vfill % double fill for more fraction
\begin{itemize}[<+(1)->]
    \itemsep5pt
    \item Javas' Methodensignaturen bestehen aus dem Namen und der Parametertypliste
    \item Java unterscheidet vier verschiedene Sichtbarkeitsbereiche \info{von denen drei bisher relevant sind}\begin{itemize}
        \item Java verwendet Pakete (Ordner) zur hierarchischen Verwaltung
        \item \bjava{public}: überall, nichts: \say{package-private}, \bjava{private}: innerhalb der Klasse
    \end{itemize}
    \item Klassen besitzen einen Zustand (Attribute) und ein Verhalten (Methoden) \begin{itemize}
        \item Der Konstruktor legt den initialen Zustand fest
        \item Es gibt nur dann einen default-Konstruktor, wenn kein expliziter vorliegt
        \item (nicht-final) Attribute werden von Java mit default-Werten initialisiert
    \end{itemize}
\end{itemize}
\end{frame}
}

% TODO: pascal case


\outro{\vskip9mm\centering \onslide<2->{\scalebox{1.35}{\begin{tikzpicture}
        \node[scale=.265,rotate=-13] (bb) at (0,0) {\usebox\beebox};
        \node[left,yshift=-16mm,scale=1.33] at (bb.west) {\usebox\pingudoc};
    \end{tikzpicture}}}}

\iffull\end{document}\fi
